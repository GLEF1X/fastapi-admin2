<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://npmcdn.com/flatpickr/dist/l10n/ru.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<div class="form-group mb-3">
    <div class="input-icon">
                              <span class="input-icon-addon"><!-- Download SVG icon from http://tabler-icons.io/i/calendar -->
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
                                     viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
                                     stroke-linecap="round" stroke-linejoin="round"><path stroke="none"
                                                                                          d="M0 0h24v24H0z"
                                                                                          fill="none"></path><rect
                                        x="4" y="5" width="16" height="16" rx="2"></rect><line x1="16" y1="3"
                                                                                               x2="16"
                                                                                               y2="7"></line><line
                                        x1="8" y1="3" x2="8" y2="7"></line><line x1="4" y1="11" x2="20"
                                                                                 y2="11"></line><line x1="11"
                                                                                                      y1="15"
                                                                                                      x2="12"
                                                                                                      y2="15"></line><line
                                        x1="12" y1="15" x2="12" y2="18"></line></svg>
                              </span>
        <input {% if not null %}required{% endif %}
               class="form-control"
               placeholder="{{ placeholder }}"
               id="datepicker-icon"
               value="{{ value }}"
               {% if disabled %}disabled{% endif %}
        >
    </div>
</div>
<script>
    jQuery.loadScript = function (url, callback) {
        jQuery.ajax({
            url: url,
            dataType: 'script',
            success: callback,
            async: true
        });
    }
    let current_locale = "{{ current_locale|safe }}"
    $.loadScript(
        `https://npmcdn.com/flatpickr@4.6.9/dist/l10n/${current_locale}.js`, function () {
            const fp = flatpickr("#datepicker-icon", {
                enableTime: "{{ enable_time|safe }}".toLowerCase() === "true",
                "locale": current_locale,
            })
        });
</script>